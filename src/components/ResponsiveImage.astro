---
import { Annotation, ImageSizes } from '@content'

export interface Props {
  src: ImageSizes
  className?: string
  annotations?: Record<'self', Annotation>
}

// const src = Astro.props.src as Props['src']
const { className, src, annotations } = Astro.props as Props

if (!src) {
  throw new Error('Image component requires a src prop')
}
---

<img
  class={className}
  srcset={`${src['1x']} 1x, ${src['2x']} 2x, ${src['3x']} 3x`}
  src={src['1x']}
  {...annotations?.self || {}}
/>
